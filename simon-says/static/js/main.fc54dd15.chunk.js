(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/lose.56fd51fe.mp3"},function(t,e,n){t.exports=n(19)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(7),r=n.n(s),o=(n(15),n(1)),l=n(2),u=n(4),c=n(3),h=n(5),d=(n(16),n(17),n(18),function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"button-container"},i.a.createElement("button",{className:"color-"+this.props.index+(!0===this.props.playing?" playing":"")+(!1===this.props.started?" not-started":"")+(!0===this.props.currentlyPlaying?" currently-playing":""),onClick:this.props.onClick}))}}]),e}(i.a.Component)),p=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"renderButton",value:function(t){var e=this;return i.a.createElement(d,{index:t,playing:this.props.playing,started:this.props.started,currentlyPlaying:this.props.currentlyPlaying===t,onClick:function(){return e.props.onClick(t)}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"board"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"item"},this.renderButton(0)),i.a.createElement("div",{className:"item"},this.renderButton(1))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"item"},this.renderButton(2)),i.a.createElement("div",{className:"item"},this.renderButton(3))))}}]),e}(i.a.Component),y=n(8),m=n.n(y),g=function(t){function e(t){var n;Object(o.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={playing:!0,currentlyPlaying:null,message:'Para come\xe7ar, clique em "Iniciar jogo"',roundTimeout:400,defaultToneGain:.005,started:!1,correctExecution:[],currentExecution:[],increaseSpeedEachNRounds:2,timesLost:0,timesLostForPrank:2,audioCtx:new(window.AudioContext||window.webkitAudioContext)};var a=0;return document.addEventListener("touchstart",function(t){var e=+new Date;a+500>e&&t.preventDefault(),a=e}),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"playNote",value:function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.state.audioCtx.createOscillator(),s=this.state.audioCtx.createGain();i.type="square",i.frequency.value=t,s.gain.value=n,console.log("Playing "+t+"Hz at gain "+n),i.connect(s),s.connect(this.state.audioCtx.destination),i.start(),setTimeout(function(){i.stop(),null!=a&&a()},e)}},{key:"playMelody",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.length>0){var i=t.pop();this.playNote(i[0],256e3/(i[1]*e),this.state.defaultToneGain,function(){n.playMelody(t,e,a)})}else null!=a&&a()}},{key:"indexToFrequency",value:function(t){return 100*t+250}},{key:"showMessage",value:function(t){this.setState({message:t})}},{key:"isExecutingCorrectly",value:function(t,e){return JSON.stringify(t)===JSON.stringify(e.slice(0,t.length))}},{key:"handleClick",value:function(t){var e=this;if(!1===this.state.playing&&!0===this.state.started){var n=this.state.currentExecution.slice(),a=this.state.correctExecution.slice();if(n.push(t),this.isExecutingCorrectly(n,a)){this.setState({playing:!0,currentlyPlaying:t,currentExecution:n});this.playNote(this.indexToFrequency(t),300,this.state.defaultToneGain,function(){e.setState({playing:!1,currentlyPlaying:null}),!1===e.state.currentExecution.length<e.state.correctExecution.length&&e.proceedExecution()})}else this.lose()}}},{key:"simulateClick",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("Simulating random index: "+t),this.setState({currentlyPlaying:t});this.playNote(this.indexToFrequency(t),this.state.roundTimeout,this.state.defaultToneGain,function(){e.setState({currentlyPlaying:null}),null!=n&&n()})}},{key:"blink",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function i(){setTimeout(function(){t.setState({playing:!t.state.playing}),e>0||null==e?(null!=e&&e--,i()):a&&a()},n||500)}()}},{key:"proceedExecution",value:function(){var t=this,e=this.state.correctExecution.slice(),n=Math.ceil(0),a=Math.floor(3),i=Math.floor(Math.random()*(a-n+1))+n;e.push(i),this.setState({correctExecution:e.slice(),currentExecution:[],playing:!0});var s=e.length;this.showMessage("Rodada "+s+(s%this.state.increaseSpeedEachNRounds===0?"<br />Mais r\xe1pido!":"")),s%this.state.increaseSpeedEachNRounds===0&&this.setState({roundTimeout:this.state.roundTimeout-50}),e.reverse(),setTimeout(function(){t.simulateClick(e.pop(),function n(){setTimeout(function(){e.length>0?t.simulateClick(e.pop(),n):t.setState({playing:!1})},t.state.roundTimeout)})},2*this.state.roundTimeout)}},{key:"start",value:function(){var t=this,e=document.getElementById("audio");!1===e.paused&&(e.pause(),e.currentTime=0),this.showMessage("");var n=[[400,18],[500,18],[600,18],[700,18],[800,18],[900,18],[1e3,18]];n.reverse(),this.playMelody(n,100);this.setState({playing:!1,started:!1,message:"Iniciando nova partida",correctExecution:[],currentExecution:[],roundTimeout:400}),this.blink(2,null,function(){t.setState({playing:!0,started:!0}),t.proceedExecution()})}},{key:"prank",value:function(){window.addEventListener("beforeunload",function(t){t.returnValue="Foge n\xe3o safado"});var t=document.getElementById("audio");t.volume=1,t.play(),this.showMessage("Eita!"),this.blink(null,100)}},{key:"lose",value:function(){var t=this,e=this.state.timesLost+1;if(this.setState({timesLost:e}),e%this.state.timesLostForPrank===0)this.prank();else{var n=this.state.correctExecution.length;this.showMessage("Voc\xea errou :(<br />Sobreviveu "+n+" round"+(n>1?"s":""));var a=[[50,20],[0,20],[50,20],[0,20],[50,20],[0,20],[50,20]];a.reverse();var i=a.map(function(t){return t.map(function(t,e){return 0===e?2*t:t})}),s=a.map(function(t){return t.map(function(t,e){return 0===e?3*t:t})}),r=a.map(function(t){return t.map(function(t,e){return 0===e?8*t:t})});this.playMelody(a,100),this.playMelody(i,100),this.playMelody(s,100),this.playMelody(r,100);this.setState({playing:!0,started:!0}),this.blink(3,null,function(){t.setState({playing:!0})})}}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"game"},i.a.createElement("h1",{className:"output",dangerouslySetInnerHTML:{__html:this.state.message}}),i.a.createElement("button",{className:"startGame"+(this.state.timesLost>0&&this.state.timesLost%this.state.timesLostForPrank===0?" lost-prank":""),onClick:function(){return t.start()}},!0===this.state.started?"Reiniciar jogo":"Iniciar jogo"),i.a.createElement("div",{className:"board-container"},i.a.createElement(p,{playing:this.state.playing,started:this.state.started,currentlyPlaying:this.state.currentlyPlaying,onClick:function(e){return t.handleClick(e)}})),i.a.createElement("audio",{id:"audio"},i.a.createElement("source",{src:m.a})))}}]),e}(i.a.Component);r.a.render(i.a.createElement(g,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.fc54dd15.chunk.js.map